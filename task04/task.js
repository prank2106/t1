//@@viewOff:const
const sampleData = [
    {
        "gender": "female",
        "birthdate": "1983-04-14T00:09:28.478Z",
        "name": "Lucie",
        "surname": "Dostálová"
    }, {"gender": "male", "birthdate": "2002-12-04T01:30:22.784Z", "name": "Vašek", "surname": "Hájek"}, {
        "gender": "male",
        "birthdate": "1974-01-22T07:39:21.732Z",
        "name": "Karel",
        "surname": "Černý"
    }, {
        "gender": "female",
        "birthdate": "1984-03-31T22:33:54.367Z",
        "name": "Martina",
        "surname": "Wilhelmová"
    }, {"gender": "male", "birthdate": "1981-05-16T10:41:45.465Z", "name": "Ondřej", "surname": "Hájek"}, {
        "gender": "male",
        "birthdate": "1986-10-27T19:58:27.952Z",
        "name": "Ivo",
        "surname": "Jelínek"
    }, {
        "gender": "male",
        "birthdate": "2002-05-06T18:56:29.515Z",
        "name": "Rudolf",
        "surname": "Hájek"
    }, {
        "gender": "female",
        "birthdate": "1992-08-22T07:24:18.875Z",
        "name": "Ivana",
        "surname": "Dostálová"
    }, {
        "gender": "male",
        "birthdate": "1976-09-06T20:04:28.945Z",
        "name": "Lukáš",
        "surname": "Pospíšil"
    }, {
        "gender": "female",
        "birthdate": "1979-04-09T01:01:41.780Z",
        "name": "Eliška",
        "surname": "Korelusová"
    }, {
        "gender": "female",
        "birthdate": "1986-09-13T19:50:39.430Z",
        "name": "Monika",
        "surname": "Malá"
    }, {
        "gender": "male",
        "birthdate": "1977-12-27T09:25:09.711Z",
        "name": "Roman",
        "surname": "Němec"
    }, {
        "gender": "female",
        "birthdate": "2003-03-17T11:57:39.686Z",
        "name": "Alena",
        "surname": "Konečná"
    }, {"gender": "male", "birthdate": "1989-05-23T20:17:29.912Z", "name": "Roman", "surname": "Král"}, {
        "gender": "female",
        "birthdate": "2003-10-22T00:21:26.082Z",
        "name": "Veronika",
        "surname": "Křížová"
    }, {"gender": "male", "birthdate": "1995-08-28T06:46:44.483Z", "name": "Štefan", "surname": "Kolář"}, {
        "gender": "male",
        "birthdate": "1995-08-19T01:59:56.722Z",
        "name": "Jarda",
        "surname": "Čermák"
    }, {
        "gender": "female",
        "birthdate": "2000-03-02T09:09:50.771Z",
        "name": "Veronika",
        "surname": "Gabrielová"
    }, {
        "gender": "male",
        "birthdate": "1987-11-03T11:53:49.713Z",
        "name": "Jindřich",
        "surname": "Procházka"
    }, {
        "gender": "female",
        "birthdate": "1990-07-09T14:11:48.247Z",
        "name": "Jaroslava",
        "surname": "Korelusová"
    }, {
        "gender": "female",
        "birthdate": "1995-12-11T04:57:50.882Z",
        "name": "Petra",
        "surname": "Černá"
    }, {
        "gender": "male",
        "birthdate": "1984-06-04T04:55:42.389Z",
        "name": "Vašek",
        "surname": "Dvořák"
    }, {
        "gender": "female",
        "birthdate": "1985-01-16T08:07:43.978Z",
        "name": "Marie",
        "surname": "Křížová"
    }, {
        "gender": "female",
        "birthdate": "1998-09-13T03:18:23.189Z",
        "name": "Zuzana",
        "surname": "Soukupová"
    }, {
        "gender": "female",
        "birthdate": "1983-10-24T22:53:10.264Z",
        "name": "Jaroslava",
        "surname": "Marešová"
    }, {
        "gender": "male",
        "birthdate": "1997-10-16T20:45:05.863Z",
        "name": "Kamil",
        "surname": "Fiala"
    }, {
        "gender": "female",
        "birthdate": "1995-10-15T08:17:17.217Z",
        "name": "Eva",
        "surname": "Šestáková"
    }, {
        "gender": "male",
        "birthdate": "1979-03-06T05:09:51.285Z",
        "name": "Roman",
        "surname": "Novotný"
    }, {"gender": "male", "birthdate": "1980-06-30T07:46:49.219Z", "name": "Štefan", "surname": "Fiala"}, {
        "gender": "male",
        "birthdate": "1978-07-03T15:38:46.381Z",
        "name": "Marek",
        "surname": "Horák"
    }, {
        "gender": "female",
        "birthdate": "1986-05-10T17:51:23.608Z",
        "name": "Marie",
        "surname": "Gabrielová"
    }, {
        "gender": "male",
        "birthdate": "1983-01-02T18:33:18.069Z",
        "name": "Ivo",
        "surname": "Pospíšil"
    }, {
        "gender": "female",
        "birthdate": "1972-08-08T02:03:40.945Z",
        "name": "Lenka",
        "surname": "Šobrová"
    }, {
        "gender": "male",
        "birthdate": "1980-03-03T13:52:02.344Z",
        "name": "Marek",
        "surname": "Navrátil"
    }, {
        "gender": "male",
        "birthdate": "1998-02-13T10:45:03.016Z",
        "name": "Vladimír",
        "surname": "Svoboda"
    }, {
        "gender": "male",
        "birthdate": "1974-11-15T15:18:19.432Z",
        "name": "Marek",
        "surname": "Sedláček"
    }, {
        "gender": "male",
        "birthdate": "1992-12-13T04:36:08.113Z",
        "name": "Ondřej",
        "surname": "Doležal"
    }, {
        "gender": "female",
        "birthdate": "2004-01-05T11:28:28.796Z",
        "name": "Jitka",
        "surname": "Křížová"
    }, {
        "gender": "female",
        "birthdate": "1998-07-21T22:25:17.723Z",
        "name": "Markéta",
        "surname": "Křížová"
    }, {
        "gender": "male",
        "birthdate": "1976-11-25T10:16:08.575Z",
        "name": "Radek",
        "surname": "Jelínek"
    }, {
        "gender": "female",
        "birthdate": "1985-08-26T23:02:24.964Z",
        "name": "Petra",
        "surname": "Dostálová"
    }, {
        "gender": "female",
        "birthdate": "1981-09-15T01:49:55.630Z",
        "name": "Marie",
        "surname": "Šobrová"
    }, {
        "gender": "female",
        "birthdate": "2000-09-22T05:11:46.307Z",
        "name": "Alena",
        "surname": "Gabrielová"
    }, {"gender": "male", "birthdate": "1979-07-08T11:48:39.265Z", "name": "Kamil", "surname": "Zeman"}, {
        "gender": "male",
        "birthdate": "1994-11-13T10:58:06.816Z",
        "name": "Karel",
        "surname": "Zeman"
    }, {
        "gender": "male",
        "birthdate": "1997-08-26T02:24:48.360Z",
        "name": "Jarda",
        "surname": "Dvořák"
    }, {
        "gender": "female",
        "birthdate": "1982-02-28T10:34:40.735Z",
        "name": "Markéta",
        "surname": "Konečná"
    }, {
        "gender": "female",
        "birthdate": "1996-08-28T15:20:09.248Z",
        "name": "Zuzana",
        "surname": "Gabrielová"
    }, {
        "gender": "female",
        "birthdate": "1998-11-06T15:50:57.183Z",
        "name": "Zuzana",
        "surname": "Stehlíková"
    }, {"gender": "male", "birthdate": "1985-02-28T13:38:43.560Z", "name": "Štefan", "surname": "Hájek"}];
//@@viewOff:const

//@@viewOn:helpers
function getNames(countOfNamesReturned) {
    let myMapBoth = new Map();
    let myMapMale = new Map();
    let myMapFemale = new Map();

    let nameSexMap = new Map();
    sampleData.forEach(each => {
        nameSexMap.set(each.name, each.gender);
    });

    for (let i = 0; i < sampleData.length; i++) {
        let current = sampleData[i];
        //dohromady
        if (myMapBoth.has(current.name)) {
            myMapBoth.set(current.name, myMapBoth.get(current.name) + 1);
        } else {
            myMapBoth.set(current.name, 1);
        }
    }

    myMapBoth.forEach((value, key) => {
        let isMale = nameSexMap.get(key).toUpperCase().trim() === "MALE";
        if (isMale)
            myMapMale.set(key, value);
        else
            myMapFemale.set(key, value);
    });

    const sortedBoth = new Map([...myMapBoth.entries()]
        .sort((a, b) => b[1] - a[1]));
    const sortedMale = new Map([...myMapMale.entries()]
        .sort((a, b) => b[1] - a[1]));
    const sortedFemale = new Map([...myMapFemale.entries()]
        .sort((a, b) => b[1] - a[1]));

    const slicedBoth = Array.from(sortedBoth).slice(sortedBoth.size - countOfNamesReturned);


    return JSON.stringify(slicedBoth);
}

//@@viewOff:helpers


//@@viewOn:main
/**
 * @param {object} dtoIn input data
 * @return {object} output data
 **/
function main(dtoIn = {}) {

    let classRoom = dtoIn.classroom;
    let top = dtoIn.top;

    let names;

    if (Number(top) === 0.5) {
        names = getNames(15, classRoom)
    } else if (Number(top) === 0.1) {
        names = getNames(3, classRoom)
    }


    let allObj = {all: names};


    return {
        names: names
    }

}

let test = names = getNames(15);
console.log("jkl;kjfs;dlfsd")
//@@viewOff:main